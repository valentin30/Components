{"version":3,"sources":["components/Button/Button.jsx","context/Observer/ObserverContext.jsx","context/Network/NetworkContext.jsx","components/Image/Image.jsx","components/Toggle/Toggle.jsx","App.jsx","reportWebVitals.js","context/index.js","index.js","components/Button/index.module.scss","components/Image/index.module.scss","components/Toggle/index.module.scss"],"names":["Button","props","type","size","fullWidth","loading","disabled","fancy","className","rest","stylesArray","styles","push","join","generatePropsFromProps","children","ObserverContext","createContext","imageObserver","IntersectionObserver","options","rootMargin","threshold","callback","entries","self","forEach","entry","isIntersecting","target","src","dataset","unobserve","ObserverContextProvider","imageObserverRef","useRef","useEffect","current","disconnect","Provider","value","NetworkContext","effectiveType","downlink","rtt","connection","navigator","mozConnection","webkitConnection","NetworkContextProvider","useState","state","setState","changeHandler","addEventListener","removeEventListener","ImageFallback","useContext","lowConnection","style","showButtonForDemo","onClick","onUserAllow","Image","maxWidth","maxHeight","setLoading","userAllowed","setUserAllowed","image","observe","img","ref","data-src","alt","onLoad","decoding","Toggle","App","timer","setTimeout","clearTimeout","height","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Contexts","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.e774ba22.chunk.js","sourcesContent":["import styles from './index.module.scss'\nimport { AiOutlineLoading3Quarters } from 'react-icons/ai'\n\nconst generatePropsFromProps = (props) => {\n    const { type = 'primary', size = 'normal', fullWidth, loading, disabled, fancy, className, ...rest } = props\n    const stylesArray = [styles['button'], styles[type], styles[size]]\n    if (loading) {\n        stylesArray.push(styles['loading'])\n    }\n    if (fullWidth) {\n        stylesArray.push(styles['full-width'])\n    }\n    if (fancy && !loading && !disabled) {\n        stylesArray.push(styles['hover-effect'])\n    }\n    stylesArray.push(className)\n\n    return {\n        className: stylesArray.join(' '),\n        disabled: disabled || loading,\n        ...rest\n    }\n}\n\nexport const Button = (props) => (\n    <button {...generatePropsFromProps(props)}>\n        {props.children}\n        <AiOutlineLoading3Quarters className={styles['loader']} />\n    </button>\n)\n","import { createContext, useEffect, useRef } from 'react'\n\nexport const ObserverContext = createContext({\n    imageObserver: new IntersectionObserver(() => {})\n})\n\nconst options = {\n    rootMargin: '300px',\n    threshold: 0.01\n}\n\nconst callback = (entries, self) => {\n    entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n            entry.target.src = entry.target.dataset.src\n            self.unobserve(entry.target)\n        }\n    })\n}\n\nexport const ObserverContextProvider = (props) => {\n    const imageObserverRef = useRef(new IntersectionObserver(callback, options))\n\n    useEffect(() => {\n        const imageObserver = imageObserverRef.current\n\n        return () => {\n            imageObserver.disconnect()\n        }\n    }, [])\n\n    return (\n        <ObserverContext.Provider value={{ imageObserver: imageObserverRef.current }}>\n            {props.children}\n        </ObserverContext.Provider>\n    )\n}\n","import { createContext, useEffect, useState } from 'react'\n\nexport const NetworkContext = createContext({ effectiveType: '', downlink: 0, rtt: 0 })\n\nexport const connection = navigator.connection ?? navigator.mozConnection ?? navigator.webkitConnection\n\nexport const NetworkContextProvider = (props) => {\n    const [state, setState] = useState({\n        effectiveType: connection.effectiveType,\n        downlink: connection.downlink,\n        rtt: connection.rtt\n    })\n\n    useEffect(() => {\n        const changeHandler = () => {\n            setState({ effectiveType: connection.effectiveType, downlink: connection.downlink, rtt: connection.rtt })\n        }\n\n        connection.addEventListener('change', changeHandler)\n\n        return () => {\n            connection.removeEventListener('change', changeHandler)\n        }\n    }, [])\n\n    return <NetworkContext.Provider value={state}>{props.children}</NetworkContext.Provider>\n}\n","import { useContext, useEffect, useRef, useState } from 'react'\nimport styles from './index.module.scss'\nimport { IoMdImages } from 'react-icons/io'\nimport { ObserverContext } from '../../context/Observer/ObserverContext'\nimport { NetworkContext } from '../../context/Network/NetworkContext'\nimport { Button } from '../Button'\n\nexport const ImageFallback = (props) => {\n    const { effectiveType } = useContext(NetworkContext)\n    const lowConnection = effectiveType === '2g' || effectiveType === 'slow-2g'\n\n    return (\n        <div style={props.style} className={styles['loader']}>\n            <IoMdImages />\n            {(lowConnection || props.showButtonForDemo) && (\n                <Button onClick={props.onUserAllow} size='small' type='default' loading={props.loading}>\n                    load image\n                </Button>\n            )}\n        </div>\n    )\n}\n\nexport const Image = (props) => {\n    const style = { style: { maxWidth: props.maxWidth, maxHeight: props.maxHeight } }\n    const [loading, setLoading] = useState(true)\n    const [userAllowed, setUserAllowed] = useState(false)\n    const { imageObserver } = useContext(ObserverContext)\n    const { effectiveType } = useContext(NetworkContext)\n    const image = useRef()\n\n    const loadImageHandler = () => {\n        setLoading(false)\n    }\n\n    useEffect(() => {\n        const lowConnection = effectiveType === '2g' || effectiveType === 'slow-2g'\n        if (lowConnection) {\n            if (!userAllowed) {\n                return\n            }\n        }\n        imageObserver.observe(image.current)\n        const img = image.current\n\n        return () => {\n            imageObserver.unobserve(img)\n        }\n    }, [imageObserver, effectiveType, userAllowed])\n\n    return (\n        <div className={[props.className, styles['root']].join(' ')}>\n            {loading && <ImageFallback {...style} onUserAllow={() => setUserAllowed(true)} loading={userAllowed} />}\n            <img\n                ref={image}\n                {...style}\n                data-src={props.src}\n                alt={props.alt}\n                onLoad={loadImageHandler}\n                decoding='async'\n                className={[styles['image'], loading && styles['loading']].join(' ')}\n            />\n        </div>\n    )\n}\n","import styles from './index.module.scss'\n\nexport const Toggle = ({ className, ...props }) => {\n    return (\n        <label className={[styles['toggle'], className].join(' ')}>\n            <input type='checkbox' {...props} />\n            <span className={styles['slider']}></span>\n        </label>\n    )\n}\n","import { useEffect, useState } from 'react'\nimport { Button } from './components/Button'\nimport { Image } from './components/Image'\nimport { ImageFallback } from './components/Image/Image'\nimport { Toggle } from './components/Toggle'\n\nexport const App = (props) => {\n    const [state, setState] = useState(false)\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            setState(false)\n        }, 2000)\n\n        return () => {\n            clearTimeout(timer)\n        }\n    }, [state])\n    return (\n        <div>\n            <h3>Buttons</h3>\n            <h4>Types: </h4>\n            <div className='row'>\n                <Button type='default'>Button</Button>\n                <Button type='secondary'>Button</Button>\n                <Button>Button</Button>\n            </div>\n            <h4>Sizes: </h4>\n            <div className='row'>\n                <Button size='large'>Button</Button>\n                <Button size='normal'>Button</Button>\n                <Button size='small'>Button</Button>\n            </div>\n            <h4>Effects: </h4>\n            <div className='row'>\n                <Button type='secondary' fancy>\n                    Button\n                </Button>\n                <Button fancy>Button</Button>\n            </div>\n            <h4>Loading: </h4>\n            <div className='row'>\n                <Button type='default' loading>\n                    Button\n                </Button>\n                <Button type='secondary' loading>\n                    Button\n                </Button>\n                <Button loading>Button</Button>\n            </div>\n            <h3>Toggle</h3>\n            <Toggle />\n            <h3>Images</h3>\n            <h4>Componens:</h4>\n            <div className='row same-height'>\n                <ImageFallback style={{ maxWidth: '300px', height: '180px' }} />\n                <ImageFallback style={{ maxWidth: '300px', height: '180px' }} showButtonForDemo />\n            </div>\n            <p>\n                When the internet connection is low images are not loaded, insted the user gets to choose which to load\n            </p>\n            <h4>Demo:</h4>\n            <p>If you open the network tab:</p>\n            <p>\n                you will see that images are lazy loaded (downloading start when the image is 300px away from the\n                viewport)\n            </p>\n            <p>and if you change the throttling setting to the lowwest one images will not load</p>\n            <Image\n                maxWidth='300px'\n                maxHeight='300px'\n                src='https://pixewall.com/wp-content/uploads/2021/03/4K-Wallpapers-UHD-Wallpapers.jpg'\n                alt='Original Alt'\n            />\n            <p style={{ height: '700px' }}></p>\n            <Image\n                maxWidth='300px'\n                maxHeight='300px'\n                src='https://upload.wikimedia.org/wikipedia/commons/5/53/Vaporwave-4K-Wallpapers.jpg'\n                alt='Original Alt'\n            />\n            <p style={{ height: '700px' }}></p>\n            <Image\n                maxWidth='300px'\n                maxHeight='300px'\n                src='https://wallpaperaccess.com/full/508751.jpg'\n                alt='Original Alt'\n            />\n            <p></p>\n        </div>\n    )\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { NetworkContextProvider } from './Network/NetworkContext'\nimport { ObserverContextProvider } from './Observer/ObserverContext'\n\nexport const Contexts = (props) => (\n    <NetworkContextProvider>\n        <ObserverContextProvider>{props.children}</ObserverContextProvider>\n    </NetworkContextProvider>\n)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { App } from './App'\nimport './index.scss'\nimport reportWebVitals from './reportWebVitals'\nimport { Contexts } from './context'\n\nReactDOM.render(\n    <React.StrictMode>\n        <Contexts>\n            <App />\n        </Contexts>\n    </React.StrictMode>,\n    document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3GgJ3\",\"primary\":\"Button_primary__3U5oy\",\"secondary\":\"Button_secondary__2LIZ5\",\"default\":\"Button_default__aMviL\",\"full-width\":\"Button_full-width__1A66h\",\"small\":\"Button_small__4DYQu\",\"loader\":\"Button_loader__1Ubcr\",\"normal\":\"Button_normal__gxfXj\",\"large\":\"Button_large__1K9uC\",\"hover-effect\":\"Button_hover-effect__680SJ\",\"spin\":\"Button_spin__1C6un\",\"loading\":\"Button_loading___7u6u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Image_root__34eRa\",\"image\":\"Image_image__2dZxe\",\"loading\":\"Image_loading__1tbyH\",\"loader\":\"Image_loader__3AuWU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toggle\":\"Toggle_toggle__X_iQZ\",\"slider\":\"Toggle_slider__1JBZu\"};"],"sourceRoot":""}